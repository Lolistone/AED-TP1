\documentclass[10pt,a4paper]{article}

\input{AEDmacros}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex


\titulo{Trabajo Práctico 1}
\subtitulo{Especificación y Weakest Precondition}

\fecha{\today}

\materia{Algoritmos y Estructuras de Datos}
\grupo{swifties}

\integrante{Apellido, Nombre1}{001/01}{email1@dominio.com}
\integrante{Apellido, Nombre2}{002/01}{email2@dominio.com}
\integrante{Apellido, Nombre3}{003/01}{email3@dominio.com}
\integrante{Apellido, Nombre4}{004/01}{email4@dominio.com}
% Pongan cuantos integrantes quieran

% Declaramos donde van a estar las figuras
% No es obligatorio, pero suele ser comodo
\graphicspath{{../static/}}

\begin{document}

\maketitle

\section{Especificación}

\noindent Para realizar esta primer parte consideramos que un escrutinio válido tiene las siguientes características:
\begin{enumerate} \setlength\itemsep{0cm}
	\item Contiene los votos de al menos dos partidos.
	\item En la última posición están los votos en blanco.
	\item No hay empate entre partidos.
	\item Los votos son numeros mayores o iguales a 0.
\end{enumerate}
Otras consideraciones que tuvimos fueron que:
\begin{enumerate} \setlength\itemsep{0cm}
	\item La matriz DHont tiene todos sus cocientes positivos y distintos.
	\item En las listas representamos a hombres con el 1 y mujeres con el 2.
\end{enumerate}
Los predicados y auxiliares utilizados están definidos al final de la sección. \\

\subsection{Ejercicio 1}

\begin{proc}{hayBallotage}{\In escrutinio : \TLista{\ent}}{Bool}
	%    \modifica{parametro1, parametro2,..}
	\requiere{escrutinioValido(escrutinio)}
	\asegura{res = True \longleftrightarrow \neg ((\paraTodo[unalinea]{j,k}{\ent}{0 \leq j,k < |escrutinio| - 1  \yLuego porcentaje(j, escrutinio) > 40  	\implicaLuego \\
		   	porcentaje(j, escrutinio) - porcentaje(k, escrutinio) > 10}) \lor \\
		  	\existe[unalinea]{i}{\ent}{\paraTodo[unalinea]{j}{\ent}{0 \leq i,j < |escrutinio| - 1 \yLuego porcentaje(i, escrutinio)  > 45 \land i \neq j  \implicaLuego \\ porcentaje(j, escrutinio) \leq 45}})}
\end{proc}

\subsection{Ejercicio 2}

\begin{proc}{hayFraude}{\In escrutinio\_presidencial : \TLista{\ent}, \In escrutinio\_senadores : \TLista{\ent}, \In escrutinio\_diputados : \TLista{\ent}}{Bool}
	%    \modifica{parametro1, parametro2,..}
	\requiere{escrutinioValido(escrutinio\_presidencial) \land escrutinioValido(escrutinio\_senadores) \\ \land escrutinioValido(escrutinio\_presidencial) }
	\asegura{res = True \longleftrightarrow totalVotos(escrutinio\_presidencial) =  totalVotos(escrutinio\_senador) \land  \\  totalVotos(escrutinio\_senadores) =  totalVotos(escrutinio\_diputados)}
\end{proc}

\subsection{Ejercicio 3}

\begin{proc}{obtenerSenadoresEnProvincia}{\In escrutinio : \TLista{\ent}}{$\ent \times \ent$}
	%    \modifica{parametro1, parametro2,..}
	\requiere{escrutinioValido(escrutinio)}
	\asegura{(0 \leq res_{0}, res_{1} < |escrutinio| - 1) \yLuego \paraTodo[unalinea]{i}{\ent}{0 \leq i < |escrutinio| - 1 \land i \neq res_{0} \land 
	i \neq res_{1} \implicaLuego \\ escrutinio[i] < escrutinio[res_{1}] < escrutinio[res_{0}]}} 
\end{proc}

\subsection{Ejercicio 4}

\begin{proc}{calcularDHontEnProvincia}{\In cant\_bancas : \ent, \In escrutinio : \TLista{\ent}}{\TLista{\TLista{\ent}}}
	%    \modifica{parametro1, parametro2,..}
	\requiere{cant\_bancas > 0 \land escrutinioValido(escrutinio)}
	\asegura{esMatriz(res) \yLuego |res| = |escrutinio| - 1 \yLuego |res[0]| = cant\_bancas \yLuego \\
	\paraTodo[unalinea]{i,j}{\ent}{0 \leq i < |res| \land 0 \leq j < |res[0]| \implicaLuego res[i][j] =  escrutinio[i]/(j + 1)}}
\end{proc}

\subsection{Ejercicio 5}

\begin{proc}{obtenerDiputadosEnProvincia}{\In cant\_bancas : \ent, \In DHont : \TLista{\TLista{\ent}}}{\TLista{\ent}}
	%    \modifica{parametro1, parametro2,..}
	\requiere{dHontValida(DHont) \land cant\_bancas > 0 \land cant\_bancas = |DHont[0]|}
	\asegura{|res| = |DHont| \yLuego \\ \paraTodo[unalinea]{i}{\ent}{0 \leq i < |res| \implicaLuego res[i] = \sum\limits_{j=0}^{|DHont[0]|} \IfThenElse{cant\_bancas > \#cocientesMayores(DHont[i][j], DHont)}{1}{0}}}
\end{proc}


\subsection{Ejercicio 6}

\vspace{0.1cm}

\begin{proc}{validarListasDiputadosEnProvincia}{\In cant\_bancas : \ent, \In listas : \TLista{\TLista{dni : \ent \times genero : \ent}}}{Bool}
	%    \modifica{parametro1, parametro2,..}
	\requiere{cant\_bancas > 0 \land generosValidos(listas)}
	\asegura{res = True \longleftrightarrow \\
\paraTodo[unalinea]{i}{\ent}{0 \leq i < |listas| \implicaLuego  |listas[i]|= cant\_bancas} \land \\ 
\paraTodo[unalinea]{i,j}{\ent}{0 \leq i < |listas| \yLuego 0 \leq j < |listas[i]| - 1 \yLuego listas[i][j]_{1} = 1 \implicaLuego  listas[i][j+1]_{1} = 2 } \land \\  \paraTodo[unalinea]{i,j}{\ent}{0 \leq i < |listas| \yLuego 0 \leq j < |listas[i]| - 1 \yLuego listas[i][j]_{1} = 2 \implicaLuego  listas[i][j+1]_{1} = 1 }}
\end{proc}

\subsection{Predicados y Auxiliares}

\aux{porcentaje}{\In partido : {\ent}, \In escrutinio : \TLista{\ent}}{\ent}{(escrutinio[partido] * 100) / totalVotos(escrutinio)}
\aux{\#cocientesMayores}{\In cociente : {\ent}, \In DHont : \TLista{\TLista{\ent}}}{\ent}{\sum\limits_{j=0}^{|DHont[0]|} \sum\limits_{i=0}^{|DHont|} \IfThenElse{DHont[i][j] > cociente}{1}{0}}
\aux{totalVotos}{\In escrutinio : \TLista{\ent}}{\ent}{\sum\limits_{i=0}^{|escrutinio|-1} escrutinio[i]}
\pred{noHayEmpate}{\In escrutinio : \TLista{\ent}}{\paraTodo[unalinea]{i,j}{\ent}{0 \leq i,j < |escrutinio| - 1  \land i \neq j  \implicaLuego escrutinio[i] \neq escrutinio[j] }}
\pred{votosValidos}{\In escrutinio : \TLista{\ent}}{\paraTodo[unalinea]{i}{\ent}{0 \leq i < |escrutinio| \implicaLuego escrutinio[i] \geq 0 }}
\pred{escrutinioValido}{\In escrutinio : \TLista{\ent}}{|escrutinio| > 2 \land noHayEmpate(escrutinio) \land votosValidos(escrutinio)}
\pred{esMatriz}{\In matriz : \TLista{\TLista{\ent}}}{|matriz| > 0 \yLuego |matriz[0]|>0 \land \paraTodo[unalinea]{i}{\ent}{0 \leq i < |matriz| \implicaLuego |matriz[i]| = |matriz[0]|}}
\pred{cocientesDistintos}{\In DHont : \TLista{\TLista{\ent}}}{\paraTodo[unalinea]{i,j,k,r}{\ent}{0 \leq i,k < |DHont| \land 0 \leq j, r < |DHont[0]| \land i \neq k \land j \neq r \implicaLuego 
DHont[i][j] \neq DHont[k][r]}}
\pred{cocientesPositivos}{\In DHont : \TLista{\TLista{\ent}}}{\paraTodo[unalinea]{i,j}{\ent}{0 \leq i < |DHont| \land 0 \leq j < |DHont[0]| \implicaLuego DHont[i][j] \geq 0}}
\pred{dHontValida}{\In DHont : \TLista{\TLista{\ent}}}{esMatriz(DHont) \yLuego cocientesDistintos(DHont) \land cocientesPositivos(DHont)} 
\pred{generosValidos}{\In Listas : \TLista{\TLista{\ent \times \ent}}}{\paraTodo[unalinea]{i,j}{\ent}{0 \leq i < |listas| \yLuego 0 \leq j < |listas[i]| \implicaLuego listas[i][j]_{1} = 1 \lor  listas[i][j]_{1} = 2}}

\section{Implemetaciones y demostraciones de correctitud}

\end{document}
